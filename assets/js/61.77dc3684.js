(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{388:function(s,t,a){"use strict";a.r(t);var n=a(0),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"package-json-如何产生的"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#package-json-如何产生的"}},[s._v("#")]),s._v(" package.json 如何产生的")]),s._v(" "),a("h3",{attrs:{id:"npm-init"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#npm-init"}},[s._v("#")]),s._v(" npm init")]),s._v(" "),a("blockquote",[a("p",[s._v("npm init 命令用来初始化一个简单的 package.json 文件, 执行该命令后中断会一次询问 name, version, description 等字段")])]),s._v(" "),a("h4",{attrs:{id:"npm-init-默认执行行为"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#npm-init-默认执行行为"}},[s._v("#")]),s._v(" npm init 默认执行行为")]),s._v(" "),a("blockquote",[a("p",[s._v("我们在执行 npm init 的时候, 会有一个初始化 package.json 过程, 然后一路回车, 其实可以直接使用 npm init --yes 在命令后追加 --yes 参数即可,\n其作用于一路回车相同, 这样生成的文件中就包含 package.json 文件")])]),s._v(" "),a("h4",{attrs:{id:"自定义-npm-init-行为"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自定义-npm-init-行为"}},[s._v("#")]),s._v(" 自定义 npm init 行为")]),s._v(" "),a("blockquote",[a("p",[s._v("npm init 命令的原理并不复杂, 调用 shell 脚本, 输出一个初始化的 package.json 文件; 所以相应的, 自定义npm init 命令的实现方式也很简单,\n在根目录下创建一个 .npm-init.js 即可, 该文件的 module.exports 即为 package.json 配置内容, 需要获取用户输入的时候, 使用 prompt() 方法即可;")])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" desc "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("prompt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'description?'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'A new package...'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" bar "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("prompt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'bar?'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" count "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("prompt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'count?'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'42'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    key"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'value'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    foo"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        bar"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" bar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        count"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" count\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("prompt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'name?'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cwd")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("split")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("pop")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    version"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("prompt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'version?'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0.1.0'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    description"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" desc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    main"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'index.js'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("p",[s._v("然后在 根目录 下执行 npm init 即可;")]),s._v(" "),a("h2",{attrs:{id:"package-json-中的常规属性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#package-json-中的常规属性"}},[s._v("#")]),s._v(" package.json 中的常规属性")]),s._v(" "),a("h3",{attrs:{id:"npm-中的依赖包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#npm-中的依赖包"}},[s._v("#")]),s._v(" npm 中的依赖包")]),s._v(" "),a("h4",{attrs:{id:"dependenices"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dependenices"}},[s._v("#")]),s._v(" dependenices")]),s._v(" "),a("blockquote",[a("p",[s._v("通过命令 npm install/i packageName -S/--save 把包 装在此依赖项里; 如果没有指定版本, 直接写一个包的名字, 则安装当前 npm 仓库中这个包的最新版本; 如果要指定版本的,\n可以把版本号写在包名后面, 比如  npm i vue@3.0.1 -S;\n从 npm 5.x 开始, 可以不用手动添加 -S/--save 指令, 直接执行 npm i packageName 把依赖包添加到 dependencies 中去;")])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dependencies"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"lodash"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^4.17.13"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"moment"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^2.24.0"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h4",{attrs:{id:"devdependenices"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#devdependenices"}},[s._v("#")]),s._v(" devDependenices")]),s._v(" "),a("blockquote",[a("p",[s._v("有一些包有可能只是在开发环境中用到, 例如用于检测代码规范的 eslint, 用于进行测试的 jest, 用户使用时即使不安装这些依赖也可以正常运行, 安装它们反而会耗费更多的时间和资源,\n所以我们可以把这些依赖添加到 devDependencies 中, 这些依赖照样会在本地进行 npm install 时被安装和管理, 但是不会被安装到生产环境;")])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"devDependenices"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"jest"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^24.3.1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"eslint"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^6.1.0"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h4",{attrs:{id:"二者简单对比"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二者简单对比"}},[s._v("#")]),s._v(" 二者简单对比")]),s._v(" "),a("ul",[a("li",[s._v("devDependencies 主要是存放用于本地开发的")]),s._v(" "),a("li",[s._v("dependencies 会在我们开发的时候带到线上")]),s._v(" "),a("li",[s._v("-D 会添加到 devDependencies 里面, -S 会添加到 dependencies\n"),a("ul",[a("li",[s._v("npm install -D xxxx")]),s._v(" "),a("li",[s._v("npm install -S xxxx")])])]),s._v(" "),a("li",[s._v("--save-dev 也会添加到 devDependencies")]),s._v(" "),a("li",[s._v("--save 会添加到 devDependencies")])]),s._v(" "),a("h3",{attrs:{id:"bin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bin"}},[s._v("#")]),s._v(" bin")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bin"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vm2"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./bin/vm2"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[a("em",[s._v("bin")]),s._v(" 字段指定了各个内部命令对应的 "),a("em",[s._v("可执行文件")]),s._v(" 的位置; 如果全局安装模块包, "),a("em",[s._v("npm")]),s._v(" 会使用符号链接把可执行文件链接到 "),a("em",[s._v("/user/local/bin")]),s._v(" , 如果项目中安装, 会链接到\n"),a("em",[s._v("./node_modules/.bin/")]),s._v(" ;")]),s._v(" "),a("hr"),s._v(" "),a("p",[s._v("上面的这种当依赖包安装到全局时: npm 会在 "),a("em",[s._v("/user/local/bin")]),s._v(" 下创建一个 以 "),a("em",[s._v("vm2")]),s._v(" 为名字的软链接, 指向全局安装下来的 "),a("em",[s._v("vm2")]),s._v(" 包下面的 "),a("em",[s._v("./bin/index.js")]),s._v(" ; 这时你在命令行执行\n"),a("em",[s._v("vm2")]),s._v(" 则会调用链接到这个 "),a("em",[s._v("js")]),s._v(" 文件;")]),s._v(" "),a("h3",{attrs:{id:"main"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#main"}},[s._v("#")]),s._v(" main")]),s._v(" "),a("p",[s._v("一个常用的npm包")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"main"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"lib/index.js"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[a("em",[s._v("main")]),s._v(" 属性指定程序的主入口文件, 其它项目在引用这个 "),a("em",[s._v("npm")]),s._v(" 包时, 实际上引入的是 "),a("em",[s._v("lib/index")]),s._v(" 中暴露出去的模块;")])])}),[],!1,null,null,null);t.default=e.exports}}]);